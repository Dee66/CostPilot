
running 578 tests
.........................ğŸ” Verifying Audit Log Integrity
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Audit log verification: PASS

The audit log chain is intact and tamper-proof.
Total entries verified: 0
Genesis hash: 153921536002551f
{
  "entry_count": 0,
  "status": "PASS",
  "verified": true
}
ğŸ“Š SOC2 Compliance Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š Audit Log Statistics
Overall Status: âš  PARTIALLY COMPLIANT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Report Period: 2025-12-07 to 2026-01-06
Audit Log Verified: âœ… Yes

Summary
  Total Requirements: 4
  âœ… Compliant: 3
  âŒ Non-Compliant: 0
  âš  Partially Compliant: 1
  Compliance Rate: 75.0%

Requirement Checks
  âœ… Audit log integrity verification
     Audit logs must be tamper-proof and verifiable
     Evidence:
       â€¢ Chain verification: PASS

  âš  Access control events tracked
     All access attempts must be logged
     Evidence:
       â€¢ 0 access control events recorded
     ğŸ’¡ Recommendations:
       â€¢ Enable access logging for all resources

  âœ… Policy change approval workflow
     All policy changes must follow approval workflow
     Evidence:
       â€¢ 0 policy changes recorded

Overview
  Total Events: 0
  Unique Actors: 0
  Unique Resources: 0
  Failed Events: 0

  âœ… Tamper-proof audit trail
     Audit trail uses cryptographic chain for integrity
     Evidence:
       â€¢ SHA-256 hashing enabled
âœ… Audit event recorded
  Chain Verified: âœ… Yes

Time-Based Activity
  Last 24 hours: 0
  Last 7 days: 0
       â€¢ Blockchain-style chain implemented
       â€¢ 0 entries in chain

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Report generated at: 2026-01-06T09:16:17.682359917+00:00
  Last 30 days: 0

Events by Type

Events by Severity
{
  "framework": "GDPR",
  "generated_at": "2026-01-06T09:16:17.682570901Z",
  "period_start": "2025-12-07T09:16:17.682556084Z",
  "period_end": "2026-01-06T09:16:17.682556084Z",
  "overall_status": "compliant",
  "checks": [
    {
      "requirement": "Data retention policy enforced",
      "status": "compliant",
      "description": "Audit logs retained according to policy",
      "evidence": [
        "Retention period: 2190 days"
      ]
    }
  ],
  "summary": {
    "total_requirements": 1,
    "compliant": 1,
    "non_compliant": 0,
    "partially_compliant": 0,
    "not_applicable": 0,
    "compliance_percentage": 100.0
  },
  "audit_log_verified": true
}
{
  "total_events": 1,
  "events_by_type": {
    "PolicyStateChange": 1
  },
  "events_by_severity": {
    "Low": 1
  },
  "unique_actors": 1,
  "unique_resources": 1,
  "failed_events": 0,
  "events_last_24h": 1,
  "events_last_7d": 1,
  "events_last_30d": 1,
  "chain_verified": true
}

Sequence: #0
Total entries: 1
..{
  "sequence": 1,
  "success": true,
  "total_entries": 2
}
ğŸ“Š costpilot diff

.{
  "after": {
    "monthly_cost": 120.0
  },
  "before": {
    "monthly_cost": 100.0
  },
  "delta": {
    "absolute": 20.0,
    "percentage": 20.0
  },
  "severity": "MEDIUM"
}
{
  "after": {
    "monthly_cost": 100.0
  },
  "before": {
    "monthly_cost": 120.0
  },
  "delta": {
    "absolute": -20.0,
    "percentage": -16.67
  },
  "severity": "LOW"
}
{
  "after": {
    "monthly_cost": 100.0
  },
  "before": {
    "monthly_cost": 100.0
  },
  "delta": {
    "absolute": 0.0,
    "percentage": 0.0
  },
  "severity": "INFO"
}
.# Cost Difference Report

## Summary

| Metric | Value |
|--------|-------|
| **Before** | $100.00/month |
| **After** | $120.00/month |
| **Delta** | +$20.00 (+20.0%) |
| **Severity** | ğŸŸ¡ MEDIUM |

## Details

### Before Plan
- Monthly Cost: $100.00

### After Plan
- Monthly Cost: $120.00

---

ğŸ’¡ **Next Steps**
- Run `costpilot scan --explain` for detailed analysis
- Run `costpilot autofix patch` for cost optimization suggestions
# Cost Difference Report

## Summary

| Metric | Value |
|--------|-------|
| **Before** | $120.00/month |
| **After** | $100.00/month |
| **Delta** | -$20.00 (-16.7%) |
| **Severity** | ğŸ”µ LOW |

## Details

### Before Plan
- Monthly Cost: $120.00

### After Plan
- Monthly Cost: $100.00

---

ğŸ’¡ **Next Steps**
- Run `costpilot scan --explain` for detailed analysis
- Run `costpilot autofix patch` for cost optimization suggestions
# Cost Difference Report

## Summary

| Metric | Value |
|--------|-------|
| **Before** | $100.00/month |
| **After** | $100.00/month |
| **Delta** | +$0.00 (+0.0%) |
| **Severity** | âšª INFO |

## Details

### Before Plan
- Monthly Cost: $100.00

### After Plan
- Monthly Cost: $100.00

---

ğŸ’¡ **Next Steps**
- Run `costpilot scan --explain` for detailed analysis
- Run `costpilot autofix patch` for cost optimization suggestions
.Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $120.00/month
  After:  $100.00/month

  Delta:   -$20.00/month (-16.7%)

  Severity:  ğŸ”µ LOW
Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $120.00/month
  After:  $100.00/month

  Delta:   -$20.00/month (-16.7%)

  Severity:  ğŸ”µ LOW

ğŸ’¡ Tip
   Use 'costpilot scan --explain' to see detailed breakdown
   Use 'costpilot autofix patch' for autofix suggestions
.Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $100.00/month
  After:  $120.00/month

  Delta:   +$20.00/month (+20.0%)

  Severity:  ğŸŸ¡ MEDIUM
Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $100.00/month
  After:  $120.00/month

  Delta:   +$20.00/month (+20.0%)

  Severity:  ğŸŸ¡ MEDIUM

ğŸ’¡ Tip
   Use 'costpilot scan --explain' to see detailed breakdown
   Use 'costpilot autofix patch' for autofix suggestions
.Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $100.00/month
  After:  $100.00/month

  Delta:   +$0.00/month (+0.0%)

  Severity:  âšª INFO
Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $100.00/month
  After:  $100.00/month

  Delta:   +$0.00/month (+0.0%)

  Severity:  âšª INFO

ğŸ’¡ Tip
   Use 'costpilot scan --explain' to see detailed breakdown
   Use 'costpilot autofix patch' for autofix suggestions
ğŸ“‹ Audit Log Entries
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ… Sequence #0
  Type: PolicyStateChange
  Severity: low
.  Timestamp: 2026-01-06T09:16:17.683284105+00:00
  Actor: user1
  Resource: policy1 (policy)
  Description: Activated policy
  Hash: baad22fc233cc5bd

  âœ… Sequence #1
  Type: PolicyApproval
  Severity: medium
  Timestamp: 2026-01-06T09:16:17.683287472+00:00
  Actor: user2
  Resource: policy2 (policy)
  Description: Approved policy change
  Hash: eeb0b24f571fdc20
.Cost Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Before: $0.00/month
  After:  $50.00/month

  Delta:   +$50.00/month (+0.0%)

  Severity:  âšª INFO

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total entries: 2
ğŸ“‹ Audit Log Entries
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ… Sequence #0
  Type: PolicyStateChange
  Severity: low
  Timestamp: 2026-01-06T09:16:17.683284105+00:00
  Actor: user1
  Resource: policy1 (policy)
  Description: Activated policy
  Hash: baad22fc233cc5bd

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total entries: 1
...ğŸ“Š costpilot diff

.Actual error message: Before plan not found: /tmp/.tmpDggxRO/missing_before.json
...âœ… Approving policy 'test-policy'...

âœ… Approval recorded

Policy ID: test-policy
Approver: approver@example.com
Comment: Looks good!

ğŸ‰ Policy has sufficient approvals!

Next step: costpilot policy activate test-policy
âœ… Approving policy 'test-policy'...
{
  "approved": true,
  "approver": "approver@example.com",
  "sufficient_approvals": true,
  "remaining_approvals": 0
}
âš ï¸  Deprecating policy 'test-policy'...

âš ï¸  Policy deprecated

Policy ID: test-policy
Status: Deprecated
Reason: Replaced by new policy

The policy is still active but marked for removal.
Plan migration to replacement policy.
âš ï¸  Deprecating policy 'test-policy'...
{
  "deprecated_by": "admin@example.com",
  "policy_id": "test-policy",
  "reason": "Replaced by new policy",
  "status": "deprecated"
}
ğŸš€ Activating policy 'test-policy'...
.
âœ… Policy activated successfully!

Policy ID: test-policy
Status: Active
Activated by: admin@example.com

The policy is now enforced in all evaluations.
ğŸš€ Activating policy 'test-policy'...
{
  "activated_by": "admin@example.com",
  "policy_id": "test-policy",
  "status": "active"
}
...ğŸ“‹ Audit Log Entries
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

No entries found matching criteria.
.ğŸ“š Policy history for 'test-policy'...
ğŸ” Comparing versions 1.0.0 â†’ 1.0.1...
.
Policy Version History
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â†’ Version 1.0.0
  Author: author@example.com
  Created: 2026-01-06T09:16:17.684295006+00:00
  Description: Initial policy version
  Tags: initial

Current version: 1.0.0
Total versions: 1
ğŸ“š Policy history for 'test-policy'...
âŒ Rejecting policy 'test-policy'...
{
  "policy_id": "test-policy",
  "versions": [
    {
      "version": "1.0.0",
      "content": {
        "id": "test-policy",
        "name": "Test Policy",
        "description": "Test policy description",
        "rules": {
          "test": "rule"
        },
        "config": {}
      },
      "metadata": {
        "checksum": "87128a79c72e7eb98a7f56c5073e7716bbbc668c5ba81bbe23c5ec201d8b86bb",
        "size_bytes": 117,
        "is_major": true,
        "tags": [
          "initial"
        ]
      },
      "author": "author@example.com",
      "created_at": "2026-01-06T09:16:17.684339710+00:00",
      "change_description": "Initial policy version"
    }
  ],
  "current_version": "1.0.0"
}
ğŸ“Š Policy status for 'test-policy'...

Policy Lifecycle Status
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Policy ID: test-policy
Status: Draft
Description: Policy is being drafted or edited

Permissions:
  Editable: âœ… Yes
  Enforceable: âŒ No

ğŸ“Š Policy status for 'test-policy'...
{
  "policy_id": "test-policy",
  "current_state": "draft",
  "state_description": "Policy is being drafted or edited",
  "is_editable": true,
  "is_enforceable": false,
  "requires_approval": false,
  "approvals_received": 0,
  "approvals_required": 1,
  "has_rejections": false,
  "is_expired": false,
  "transition_count": 0,
  "last_transition": null
}
ğŸ“Š Policy status for 'test-policy'...
{
  "analyses": [
    {
      "slo_id": "slo-1",
      "slo_name": "Production Budget",
      "burn_rate": 142.86,
      "projected_cost": 4428.6,
      "slo_limit": 5000.0,
      "days_to_breach": 8.5,
      "risk": "high",
      "confidence": 0.95,
      "trend_slope": 142.86,
      "trend_intercept": 1000.0,
      "r_squared": 0.95,
      "analyzed_at": "2026-01-06T09:16:17.684357423+00:00"
    },
    {
      "slo_id": "slo-2",
      "slo_name": "Dev Budget",
      "burn_rate": 50.0,
      "projected_cost": 1500.0,
      "slo_limit": 2000.0,
      "days_to_breach": 25.0,
      "risk": "medium",
      "confidence": 0.82,
      "trend_slope": 50.0,
      "trend_intercept": 500.0,
      "r_squared": 0.82,
      "analyzed_at": "2026-01-06T09:16:17.684359427+00:00"
    }
  ],
  "overall_risk": "high",
  "total_slos": 2,
  "slos_at_risk": 1,
  "generated_at": "2026-01-06T09:16:17.684367823+00:00"
}

âŒ Policy rejected

Policy ID: test-policy
Reviewer: approver@example.com

Version Diff
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

From: 1.0.0 (author@example.com)
To:   1.0.1 (updater@example.com)

Reason: Needs more review

The policy has been sent back to draft status.
Author should address feedback and resubmit.

Policy Lifecycle Status
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Policy ID: test-policy
Status: Draft
Description: Policy is being drafted or edited

Permissions:
  Editable: âœ… Yes
  Enforceable: âŒ No

History:
  Transitions: 0
.âŒ Rejecting policy 'test-policy'...
Changes:
{
  "approved": false,
  "approver": "approver@example.com",
  "sufficient_approvals": false,
  "remaining_approvals": 0
}
  âœ“ Name
  âœ“ Description
.  âœ“ Rules

Summary: Changed: name, description, rules

Checksums:
  From: 87128a79c72e7eb9
  To:   aa9e0ce70cf56b16
ğŸ” Comparing versions 1.0.0 â†’ 1.0.1...
## ğŸ“Š SLO Burn Rate Analysis

{
  "from_version": "1.0.0",
  "to_version": "1.0.1",
  "name_changed": true,
  "description_changed": true,
  "rules_changed": true,
  "config_changed": false,
  "checksum_from": "87128a79c72e7eb98a7f56c5073e7716bbbc668c5ba81bbe23c5ec201d8b86bb",
  "checksum_to": "aa9e0ce70cf56b1602d84cf66bd5f239508076d8ed3779d36931f579e770ff75",
  "author_from": "author@example.com",
  "author_to": "updater@example.com",
  "created_at_from": "2026-01-06T09:16:17.684507203+00:00",
  "created_at_to": "2026-01-06T09:16:17.684513395+00:00"
}
| SLO | Burn Rate | Projected | Days to Breach | Risk | Confidence |
|-----|-----------|-----------|----------------|------|------------|
| ğŸ”¶ Production Budget | $142.86/day | $4428.60 | 8.5 days | High | 95% |
| âš ï¸ Dev Budget | $50.00/day | $1500.00 | 25.0 days | Medium | 82% |

### Summary

- **Total SLOs:** 2
- **At Risk:** 1
- **Overall Risk:** High

.ğŸ“Š SLO Burn Rate Analysis
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”¶ Production Budget ($5000.00/month)
.  Burn Rate:      $142.86/day
  Projected Cost: $4428.60/month
  Time to Breach: 8.5 days

### âš ï¸ Action Required

**Recommended Actions:**
1. Review cost drivers in critical SLOs
2. Consider scaling down or optimizing resources
3. Update SLO limits if growth is expected
4. Investigate unexpected cost increases
.  Risk Level:     High
  Confidence:     95% (RÂ² = 0.950)

âš ï¸  Dev Budget ($2000.00/month)
  Burn Rate:      $50.00/day
  Projected Cost: $1500.00/month
  Time to Breach: 25.0 days
  Risk Level:     Medium
  Confidence:     82% (RÂ² = 0.820)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

.Summary
  Total SLOs:     2
  At Risk:        1
  Overall Risk:   High

âš ï¸  Action Required

Recommended Actions:
  1. Review cost drivers in critical SLOs
  2. Consider scaling down or optimizing resources
  3. Update SLO limits if growth is expected
  4. Investigate unexpected cost increases

....ğŸ”§ Feature Flags
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Global enabled: âœ… Yes
Canary version: 1.0.0
Canary percentage: 10.0%

Features
  experimental_prediction: âŒ Disabled
  ai_enhancements: âŒ Disabled
  advanced_analytics: âŒ Disabled
.ğŸ“ Submitting policy for approval...

âœ… Policy submitted for approval

Policy ID: .tmpa6Q3xi
Status: Review

Approval requests sent to:
  â€¢ approver1@example.com
  â€¢ approver2@example.com

Next steps:
  1. Wait for approvers to review
  2. Check status: costpilot policy status .tmpa6Q3xi
  3. Activate when approved: costpilot policy activate .tmpa6Q3xi
ğŸ“ Submitting policy for approval...
{
  "approvers": [
    "approver@example.com"
  ],
  "policy_id": ".tmpa6Q3xi",
  "status": "submitted"
}
âœ… Enabled feature: experimental_prediction
Recover error: Failed to read manifest: No such file or directory (os error 2)
....Verify error: Failed to read manifest: No such file or directory (os error 2)
.......â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           CostPilot Comprehensive Grouping Report            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Total Resources: 0
Total Monthly Cost: $-0.00

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Module Breakdown
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Service Breakdown
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Service Cost Summary
===================

Total Monthly Cost: $-0.00

By Category:

Top Services:

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Environment Breakdown
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Environment Cost Summary
=======================

Total Monthly Cost: $-0.00

By Environment:

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Cost Attribution
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cost Attribution Report
======================

Total Monthly Cost: $0.00
Tagging Coverage: 0.0%
Untagged Cost: $0.00

By Environment:

Top Cost Centers:

Top Owners:

Top Projects:

{
  "module_groups": [],
  "service_groups": [],
  "environment_groups": [],
  "attribution_report": {
    "allocations": [],
    "total_cost": 0.0,
    "cost_by_environment": {},
    "cost_by_cost_center": {},
    "cost_by_owner": {},
    "cost_by_project": {},
    "cost_by_application": {},
    "untagged_cost": 0.0
  },
  "total_resources": 0,
  "total_cost": -0.0
}
.Playbook error: Failed to read manifest: No such file or directory (os error 2)
.Cost Attribution Report
======================

Total Monthly Cost: $0.00
Tagging Coverage: 0.0%
Untagged Cost: $0.00

By Environment:

Top Cost Centers:

Top Owners:

Top Projects:

{
  "allocations": [],
  "total_cost": 0.0,
  "cost_by_environment": {},
  "cost_by_cost_center": {},
  "cost_by_owner": {},
  "cost_by_project": {},
  "cost_by_application": {},
  "untagged_cost": 0.0
}
..Environment Grouping Report
==========================

Total Monthly Cost: $-0.00

.Module Grouping Report
=====================

Total Monthly Cost: $-0.00

.....Service Cost Summary
===================

Total Monthly Cost: $-0.00

By Category:

Top Services:

ğŸš€ Initializing CostPilot...
  âœ“ Created /tmp/.tmpLB6VFv/.costpilot
  âœ“ Created /tmp/.tmpLB6VFv/.costpilot/config.yml
  Skipping CI template generation
  âœ“ Created /tmp/.tmpLB6VFv/.costpilot/policy.yml
  âœ“ Created /tmp/.tmpLB6VFv/.costpilot/baseline.json
ğŸ“Š CostPilot Dependency Mapper

  âœ“ Created /tmp/.tmpLB6VFv/.costpilot/slo.json
  âœ“ Created /tmp/.tmpLB6VFv/.gitignore

âœ… CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Run 'costpilot scan' manually to analyze costs
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infrastructure Dependencies</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        h1 {
            color: #333;
            margin-top: 0;
            font-size: 28px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .metadata {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 14px;
        }
        .metadata strong {
            color: #495057;
        }
        .mermaid {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .legend {
            margin-top: 30px;
            padding: 15px;
            background: #e7f3ff;
            border-radius: 8px;
            font-size: 13px;
        }
        .legend h3 {
            margin-top: 0;
            color: #0056b3;
        }
        .legend ul {
            list-style: none;
            padding: 0;
        }
        .legend li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }
        .legend li:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Infrastructure Dependencies</h1>

        <div class="metadata">
            <strong>Nodes:</strong> 2 |
            <strong>Edges:</strong> 0 |
            <strong>Max Depth:</strong> 0 |
            <strong>Cycles:</strong> 0 |
            <strong>Total Cost:</strong> $N/A
        </div>

        <div class="mermaid">
flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404

        </div>

        <div class="legend">
            <h3>Legend</h3>
            <ul>
                <li><strong>Solid arrows (â†’)</strong>: Direct dependencies</li>
                <li><strong>Dashed arrows (â‡¢)</strong>: Data flow</li>
                <li><strong>Double arrows (â‡’)</strong>: Network connections</li>
                <li><strong>Dotted arrows (â‹¯)</strong>: Cost attribution</li>
                <li><strong>Red border</strong>: Part of a dependency cycle</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                curve: 'basis',
                padding: 20
            }
        });
    </script>
</body>
</html>

ğŸš€ Initializing CostPilot...
  âœ“ Created /tmp/.tmpATMMn8/.costpilot
  âœ“ Created /tmp/.tmpATMMn8/.costpilot/config.yml
ğŸ“Š CostPilot Dependency Mapper

  âœ“ Created /tmp/.tmpATMMn8/.github/workflows
  âœ“ Created /tmp/.tmpATMMn8/.github/workflows/costpilot.yml
digraph CostPilot {
  rankdir=TB;
  node [fontname="Helvetica", fontsize=12];
  edge [fontname="Helvetica", fontsize=10];
  graph [pad="0.5", nodesep="1", ranksep="1"];

  "aws_instance_example" [label="example\naws_instance", shape=box, fillcolor="lightblue", style="filled"];
  "aws_s3_bucket_example" [label="example\naws_s3_bucket", shape=box, fillcolor="lightblue", style="filled"];
  // Edges

  // Legend
  subgraph cluster_legend {
    label="Legend";
    style=dashed;
    color=gray;

    legend_resource [label="Resource", shape=box, fillcolor="lightblue", style="filled"];
    legend_service [label="Service", shape=ellipse, fillcolor="lightgreen", style="filled"];
    legend_module [label="Module", shape=folder, fillcolor="lightyellow", style="filled"];

    legend_edge1 [label="", shape=point, width=0];
    legend_edge2 [label="", shape=point, width=0];
    legend_edge3 [label="", shape=point, width=0];
    legend_edge4 [label="", shape=point, width=0];
    legend_edge5 [label="", shape=point, width=0];

    legend_edge1 -> legend_edge2 [label="depends", style="solid"];
    legend_edge2 -> legend_edge3 [label="data", style="dashed", color="blue"];
    legend_edge3 -> legend_edge4 [label="network", style="dotted", color="green"];
    legend_edge4 -> legend_edge5 [label="cost", style="bold", color="red"];
  }

}

.  âœ“ Created /tmp/.tmpATMMn8/.costpilot/policy.yml
  âœ“ Created /tmp/.tmpATMMn8/.costpilot/baseline.json
.  âœ“ Created /tmp/.tmpATMMn8/.costpilot/slo.json
ğŸ“Š CostPilot Dependency Mapper

Loading Terraform plan...
  âœ“ Created /tmp/.tmpATMMn8/.gitignore

âœ… CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Commit the CI configuration file
  4. CostPilot will run automatically on pull requests
   Found 2 resource changes

Building dependency graph...
   Nodes: 2
   Edges: 0

Generating Graphviz DOT...
digraph CostPilot {
  rankdir=LR;
  node [fontname="Helvetica", fontsize=12];
  edge [fontname="Helvetica", fontsize=10];
  graph [pad="0.5", nodesep="1", ranksep="1"];

  "aws_instance_example" [label="example\naws_instance", shape=box, fillcolor="lightblue", style="filled"];
  "aws_s3_bucket_example" [label="example\naws_s3_bucket", shape=box, fillcolor="lightblue", style="filled"];
  // Edges

  // Legend
  subgraph cluster_legend {
    label="Legend";
    style=dashed;
    color=gray;

    legend_resource [label="Resource", shape=box, fillcolor="lightblue", style="filled"];
    legend_service [label="Service", shape=ellipse, fillcolor="lightgreen", style="filled"];
    legend_module [label="Module", shape=folder, fillcolor="lightyellow", style="filled"];

    legend_edge1 [label="", shape=point, width=0];
    legend_edge2 [label="", shape=point, width=0];
    legend_edge3 [label="", shape=point, width=0];
    legend_edge4 [label="", shape=point, width=0];
    legend_edge5 [label="", shape=point, width=0];

    legend_edge1 -> legend_edge2 [label="depends", style="solid"];
    legend_edge2 -> legend_edge3 [label="data", style="dashed", color="blue"];
    legend_edge3 -> legend_edge4 [label="network", style="dotted", color="green"];
    legend_edge4 -> legend_edge5 [label="cost", style="bold", color="red"];
  }

}


Graphviz Tips:
  â€¢ Render as PNG: dot -Tpng input.dot -o output.png
  â€¢ Render as SVG: dot -Tsvg input.dot -o output.svg
  â€¢ Render as PDF: dot -Tpdf input.dot -o output.pdf

Graph Statistics:
  Total nodes: 2
  Total edges: 0
  Max depth: 0

  By type:
    Resources: 2
    Services: 0
    Modules: 0
ğŸ“Š CostPilot Dependency Mapper

..ğŸ“Š CostPilot Dependency Mapper

ğŸ“Š CostPilot Dependency Mapper

Loading Terraform plan...
   Found 2 resource changes

Building dependency graph...
   Nodes: 2
   Edges: 0

Exporting to JSON...
{
  "links": [],
  "nodes": [
    {
      "group": 1,
      "id": "aws_instance_example",
      "label": "example",
      "module": null,
      "monthly_cost": null,
      "resource_type": "aws_instance",
      "type": "resource"
    },
    {
      "group": 1,
      "id": "aws_s3_bucket_example",
      "label": "example",
      "module": null,
      "monthly_cost": null,
      "resource_type": "aws_s3_bucket",
      "type": "resource"
    }
  ]
}

JSON Format:
  Format variant: d3
  Use with D3.js force-directed graph layout

Graph Statistics:
  Total nodes: 2
  Total edges: 0
  Max depth: 0

  By type:
    Resources: 2
    Services: 0
    Modules: 0
{
  "elements": [
    {
      "classes": "resource",
      "data": {
        "id": "aws_instance_example",
        "label": "example",
        "module": null,
        "monthly_cost": null,
        "resource_type": "aws_instance",
        "type": "resource"
      }
    },
    {
      "classes": "resource",
      "data": {
        "id": "aws_s3_bucket_example",
        "label": "example",
        "module": null,
        "monthly_cost": null,
        "resource_type": "aws_s3_bucket",
        "type": "resource"
      }
    }
  ],
  "style": [
    {
      "selector": "node",
      "style": {
        "background-color": "#3498db",
        "color": "#fff",
        "label": "data(label)",
        "text-halign": "center",
        "text-valign": "center"
      }
    },
    {
      "selector": "node.resource",
      "style": {
        "background-color": "#3498db",
        "shape": "rectangle"
      }
    },
    {
      "selector": "node.service",
      "style": {
        "background-color": "#2ecc71",
        "shape": "ellipse"
      }
    },
    {
      "selector": "node.module",
      "style": {
        "background-color": "#f39c12",
        "shape": "roundrectangle"
      }
    },
    {
      "selector": "edge",
      "style": {
        "curve-style": "bezier",
        "line-color": "#95a5a6",
        "target-arrow-color": "#95a5a6",
        "target-arrow-shape": "triangle",
        "width": 2
      }
    },
    {
      "selector": "edge.dependson",
      "style": {
        "line-color": "#34495e"
      }
    },
    {
      "selector": "edge.dataflow",
      "style": {
        "line-color": "#3498db",
        "line-style": "dashed"
      }
    },
    {
      "selector": "edge.networkconnection",
      "style": {
        "line-color": "#2ecc71",
        "line-style": "dotted"
      }
    },
    {
      "selector": "edge.costattribution",
      "style": {
        "line-color": "#e74c3c",
        "width": 3
      }
    }
  ]
}
.ğŸš€ Initializing CostPilot...
  âœ“ Created /tmp/.tmpHxjyDd/.costpilot
  âœ“ Created /tmp/.tmpHxjyDd/.costpilot/config.yml
  Skipping CI template generation
  âœ“ Created /tmp/.tmpHxjyDd/.costpilot/policy.yml
  âœ“ Created /tmp/.tmpHxjyDd/.costpilot/baseline.json
  âœ“ Created /tmp/.tmpHxjyDd/.costpilot/slo.json
  âœ“ Created /tmp/.tmpHxjyDd/.gitignore

âœ… CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Run 'costpilot scan' manually to analyze costs
ğŸš€ Initializing CostPilot...
.  â†’ /tmp/.tmpHxjyDd/.costpilot already exists
  â†’ /tmp/.tmpHxjyDd/.costpilot/config.yml already exists (skipped)
  Skipping CI template generation
  â†’ /tmp/.tmpHxjyDd/.costpilot/policy.yml already exists (skipped)
  â†’ /tmp/.tmpHxjyDd/.costpilot/baseline.json already exists (skipped)
  â†’ /tmp/.tmpHxjyDd/.costpilot/slo.json already exists (skipped)
.. 87/578
.  â†’ .gitignore already contains CostPilot entries

âœ… CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Run 'costpilot scan' manually to analyze costs
ğŸ“Š CostPilot Dependency Mapper

flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404

.ğŸ“Š CostPilot Dependency Mapper

.ğŸ“Š CostPilot Dependency Mapper

..flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404

[
  {
    "action": {
      "message": "EC2 instance exceeds monthly budget of $1000",
      "type": "block"
    },
    "conditions": [
      {
        "condition_type": {
          "type": "resource_type"
        },
        "operator": "equals",
        "value": "aws_instance"
      },
      {
        "condition_type": {
          "type": "monthly_cost"
        },
        "operator": "greater_than",
        "value": 1000.0
      }
    ],
    "description": "Prevent creation of EC2 instances that cost more than $1000/month",
    "enabled": true,
    "name": "Block Expensive EC2 Instances",
    "severity": "High"
  }
]
.# CostPilot Policy Rules Example

- name: "Block Expensive EC2 Instances"
  description: "Prevent creation of EC2 instances that cost more than $1000/month"
  enabled: true
  severity: High
  conditions:
    - condition_type:
        type: resource_type
      operator: equals
      value: "aws_instance"
    - condition_type:
        type: monthly_cost
      operator: greater_than
      value: 1000.0
  action:
    type: block
    message: "EC2 instance exceeds monthly budget of $1000"

- name: "Require Approval for NAT Gateways"
  description: "NAT Gateways require approval from network team"
  enabled: true
  severity: Medium
  conditions:
    - condition_type:
        type: resource_type
      operator: equals
      value: "aws_nat_gateway"
  action:
    type: require_approval
    approvers:
      - "network-team@example.com"
    message: "NAT Gateway creation requires network team approval"

- name: "Warn on High Cost Increase"
  description: "Warn when cost increases by more than 50%"
  enabled: true
  severity: Medium
  conditions:
    - condition_type:
        type: cost_increase
      operator: greater_than
      value: 50.0
  action:
    type: warn
    message: "Cost increase exceeds 50% threshold"

- name: "Restrict Instance Types"
  description: "Only allow t3, t4g, or m6i instance families"
  enabled: true
  severity: High
  conditions:
    - condition_type:
        type: resource_type
      operator: equals
      value: "aws_instance"
    - condition_type:
        type: resource_attribute
        attribute: "instance_type"
      operator: not_in
      value:
        - "t3"
        - "t4g"
        - "m6i"
  action:
    type: block
    message: "Only t3, t4g, or m6i instance families are allowed"

..Policy Rules

No policy rules found
Search paths:
ğŸ“Š CostPilot Dependency Mapper
Policy Rules
ğŸ“Š CostPilot Dependency Mapper
  â€¢ .costpilot/policies

Loading Terraform plan...
  â€¢ .costpilot/rules
  â€¢ /home/dee/.costpilot/policies
  â€¢ /etc/costpilot/policies

No policy rules found
Search paths:
  â€¢ .costpilot/policies
  â€¢ .costpilot/rules
  â€¢ /home/dee/.costpilot/policies
  â€¢ /etc/costpilot/policies
   Found 2 resource changes

Building dependency graph...
.   Nodes: 2
   Edges: 0

Generating Mermaid diagram...
flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404


Graph Statistics:
  Total nodes: 2
  Total edges: 0
  Max depth: 0
.
  By type:
    Resources: 2
    Services: 0
    Modules: 0
Policy Rule Statistics

Searching default paths...
.
Total Rules: 0
Enabled: 0
Disabled: 0

By Severity:

..
âœ“ Example written to /tmp/.tmpBwffQy/example.yml
âœ“ Output written to /tmp/.tmpV8Ejuf/output.mmd
Validating Policy Rules
Path: /tmp/.tmpF66QtN/nonexistent.yml

Testing Policy Rules

Testing Policy Rules

Loaded 1 rules

Found 1 matching rules:

â€¢ Test EC2 Rule [HIGH]
  EC2 instance too expensive

âš ï¸  Some rules would BLOCK this resource
Loaded 1 rules

Found 1 matching rules:

â€¢ Test Rule [LOW]
  Test warning
  Action: Warn { message: "Test warning" }

.....Validating Policy Rules
Path: /tmp/.tmpJfXLXz/policy.yml

Policy Rule Statistics

Loading from: /tmp/.tmp9fpAFy/policy.yml
âœ“ All rules valid

Total Rules: 1
Enabled: 1
Disabled: 0

By Severity:
  Medium: 1

.
Total Rules: 1
Enabled: 1
Disabled: 0

By Severity:
  Medium: 1

.................................................................... 174/578
......................................................Actual error: Package verification failed: ["Not all required files are present"]
................................. 261/578
....................................................................................... 348/578
.......âš ï¸  Free edition: Policy enforcement disabled (lint-only mode)
âš ï¸  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
.   Upgrade to Premium to block deployments on policy violations
.âš ï¸  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
..âš ï¸  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
..âš ï¸  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
.......................................................................... 435/578
..................âš ï¸  Free edition: SLO 'monthly_budget' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
..âš ï¸  Free edition: SLO 'monthly_budget' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
âš ï¸  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
...âš ï¸  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
âš ï¸  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
..âš ï¸  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
.............................................................. 522/578
....................Report errors: [ValidationError { message: "Negative monthly cost: -100", field: Some("modules.root.test.expected_monthly_cost"), line: None, column: None, hint: Some("Cost must be non-negative"), error_code: Some("E301") }]
Report is_valid: false
....................................
test result: ok. 578 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.05s

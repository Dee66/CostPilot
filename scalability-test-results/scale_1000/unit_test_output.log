
running 578 tests
....................üîê Verifying Audit Log Integrity
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ Audit log verification: PASS

The audit log chain is intact and tamper-proof.
Total entries verified: 0
Genesis hash: 153921536002551f
{
  "entry_count": 0,
  "status": "PASS",
  "verified": true
}
üìä SOC2 Compliance Report
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üìä Audit Log Statistics
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Overview
  Total Events: 0
  Unique Actors: 0
  Unique Resources: 0
  Failed Events: 0
  Chain Verified: ‚úÖ Yes

Time-Based Activity
  Last 24 hours: 0
  Last 7 days: 0
  Last 30 days: 0

Events by Type

Events by Severity
{
  "total_events": 0,
  "events_by_type": {},
  "events_by_severity": {},
  "unique_actors": 0,
  "unique_resources": 0,
  "failed_events": 0,
  "events_last_24h": 0,
  "events_last_7d": 0,
  "events_last_30d": 0,
  "chain_verified": true
}
.Overall Status: ‚ö† PARTIALLY COMPLIANT
Report Period: 2025-12-07 to 2026-01-06
Audit Log Verified: ‚úÖ Yes

Summary
  Total Requirements: 4
  ‚úÖ Compliant: 3
‚úÖ Audit event recorded

Sequence: #0
Total entries: 1
  ‚ùå Non-Compliant: 0
  ‚ö† Partially Compliant: 1
  Compliance Rate: 75.0%

Requirement Checks
  ‚úÖ Audit log integrity verification
     Audit logs must be tamper-proof and verifiable
     Evidence:
       ‚Ä¢ Chain verification: PASS

  ‚ö† Access control events tracked
     All access attempts must be logged
     Evidence:
       ‚Ä¢ 0 access control events recorded
     üí° Recommendations:
       ‚Ä¢ Enable access logging for all resources

  ‚úÖ Policy change approval workflow
     All policy changes must follow approval workflow
     Evidence:
       ‚Ä¢ 0 policy changes recorded

  ‚úÖ Tamper-proof audit trail
     Audit trail uses cryptographic chain for integrity
     Evidence:
       ‚Ä¢ SHA-256 hashing enabled
       ‚Ä¢ Blockchain-style chain implemented
       ‚Ä¢ 0 entries in chain

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Report generated at: 2026-01-06T09:36:17.958788386+00:00
{
  "sequence": 1,
  "success": true,
  "total_entries": 2

thread 'cli::commands::audit::tests::test_cmd_audit_compliance' (418641) panicked at src/cli/commands/audit.rs:622:9:
assertion failed: result.is_ok()
}
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
..üìã Audit Log Entries
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  ‚úÖ Sequence #0
  Type: PolicyStateChange
  Severity: low
  Timestamp: 2026-01-06T09:36:17.959544172+00:00
  Actor: user1
  Resource: policy1 (policy)
  Description: Activated policy
  Hash: fff1c2dbb47f0e6c

  ‚úÖ Sequence #1
  Type: PolicyApproval
  Severity: medium
  Timestamp: 2026-01-06T09:36:17.959547127+00:00
  Actor: user2
  Resource: policy2 (policy)
  Description: Approved policy change
  Hash: b2e9b3de4edca8d6

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Total entries: 2
üìã Audit Log Entries
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  ‚úÖ Sequence #0
  Type: PolicyStateChange
  Severity: low
  Timestamp: 2026-01-06T09:36:17.959544172+00:00
  Actor: user1
  Resource: policy1 (policy)
  Description: Activated policy
  Hash: fff1c2dbb47f0e6c

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Total entries: 1
.... 27/578
cli::commands::audit::tests::test_cmd_audit_compliance --- FAILED
..üìã Audit Log Entries
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

No entries found matching criteria.
üìä costpilot diff

Actual error message: Before plan not found: /tmp/.tmpekH5xK/missing_before.json
.# Cost Difference Report

## Summary

| Metric | Value |
|--------|-------|
| **Before** | $100.00/month |
| **After** | $120.00/month |
| **Delta** | +$20.00 (+20.0%) |
| **Severity** | üü° MEDIUM |

## Details
.
### Before Plan
- Monthly Cost: $100.00

### After Plan
- Monthly Cost: $120.00

---

üí° **Next Steps**
- Run `costpilot scan --explain` for detailed analysis
- Run `costpilot autofix patch` for cost optimization suggestions
# Cost Difference Report

## Summary

| Metric | Value |
|--------|-------|
| **Before** | $120.00/month |
| **After** | $100.00/month |
| **Delta** | -$20.00 (-16.7%) |
| **Severity** | üîµ LOW |

## Details

### Before Plan
- Monthly Cost: $120.00

### After Plan
- Monthly Cost: $100.00

---

üí° **Next Steps**
- Run `costpilot scan --explain` for detailed analysis
- Run `costpilot autofix patch` for cost optimization suggestions
.Cost Comparison
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $100.00/month
  After:  $100.00/month

  Delta:   +$0.00/month (+0.0%)

Cost Comparison
# Cost Difference Report

## Summary

| Metric | Value |
|--------|-------|
| **Before** | $100.00/month |
| **After** | $100.00/month |
| **Delta** | +$0.00 (+0.0%) |
| **Severity** | ‚ö™ INFO |

## Details

### Before Plan
- Monthly Cost: $100.00

### After Plan
- Monthly Cost: $100.00

---

üí° **Next Steps**
- Run `costpilot scan --explain` for detailed analysis
- Run `costpilot autofix patch` for cost optimization suggestions
  Severity:  ‚ö™ INFO
Cost Comparison
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $100.00/month
  After:  $100.00/month

  Delta:   +$0.00/month (+0.0%)

  Severity:  ‚ö™ INFO

üí° Tip
   Use 'costpilot scan --explain' to see detailed breakdown
   Use 'costpilot autofix patch' for autofix suggestions
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $0.00/month
  After:  $50.00/month

  Delta:   +$50.00/month (+0.0%)

  Severity:  ‚ö™ INFO
.......üöÄ Activating policy 'test-policy'...

‚úÖ Policy activated successfully!

Policy ID: test-policy
Status: Active
Activated by: admin@example.com

The policy is now enforced in all evaluations.
üöÄ Activating policy 'test-policy'...
{
  "activated_by": "admin@example.com",
  "policy_id": "test-policy",
  "status": "active"
}
.‚ö†Ô∏è  Deprecating policy 'test-policy'...

‚ö†Ô∏è  Policy deprecated

Policy ID: test-policy
Status: Deprecated
Reason: Replaced by new policy

The policy is still active but marked for removal.
Plan migration to replacement policy.
‚ö†Ô∏è  Deprecating policy 'test-policy'...
{
  "deprecated_by": "admin@example.com",
  "policy_id": "test-policy",
  "reason": "Replaced by new policy",
  "status": "deprecated"
}
.üîß Feature Flags
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Global enabled: ‚úÖ Yes
Canary version: 1.0.0
Canary percentage: 10.0%

Features
  ai_enhancements: ‚ùå Disabled
  experimental_prediction: ‚ùå Disabled
  advanced_analytics: ‚ùå Disabled
Cost Comparison
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $120.00/month
  After:  $100.00/month

  Delta:   -$20.00/month (-16.7%)

  Severity:  üîµ LOW
Cost Comparison
{
  "after": {
    "monthly_cost": 120.0
  },
  "before": {
    "monthly_cost": 100.0
  },
  "delta": {
    "absolute": 20.0,
    "percentage": 20.0
  },
  "severity": "MEDIUM"
}
{
  "after": {
    "monthly_cost": 100.0
  },
  "before": {
    "monthly_cost": 120.0
  },
  "delta": {
    "absolute": -20.0,
    "percentage": -16.67
  },
  "severity": "LOW"
}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $120.00/month
  After:  $100.00/month

  Delta:   -$20.00/month (-16.7%)

  Severity:  üîµ LOW

üí° Tip
   Use 'costpilot scan --explain' to see detailed breakdown
   Use 'costpilot autofix patch' for autofix suggestions
Cost Comparison
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $100.00/month
  After:  $120.00/month

  Delta:   +$20.00/month (+20.0%)

.  Severity:  üü° MEDIUM
Cost Comparison
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

  Before: $100.00/month
  After:  $120.00/month
{
  "after": {
    "monthly_cost": 100.0
  },
  "before": {
    "monthly_cost": 100.0
  },
  "delta": {
    "absolute": 0.0,
    "percentage": 0.0
  },
  "severity": "INFO"
}
.‚úÖ Enabled feature: experimental_prediction
‚úÖ Approving policy 'test-policy'...

‚úÖ Approval recorded

Policy ID: test-policy
Approver: approver@example.com
Comment: Looks good!

üéâ Policy has sufficient approvals!

Next step: costpilot policy activate test-policy
‚úÖ Approving policy 'test-policy'...
{
  "approved": true,
  "approver": "approver@example.com",
  "sufficient_approvals": true,
  "remaining_approvals": 0
}
üîç Comparing versions 1.0.0 ‚Üí 1.0.1...

Version Diff
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

From: 1.0.0 (author@example.com)
To:   1.0.1 (updater@example.com)

Changes:
  ‚úì Name
  ‚úì Description
  ‚úì Rules

Summary: Changed: name, description, rules

Checksums:
  From: 87128a79c72e7eb9
  To:   aa9e0ce70cf56b16
üîç Comparing versions 1.0.0 ‚Üí 1.0.1...
{
  "from_version": "1.0.0",
  "to_version": "1.0.1",
  "name_changed": true,
  "description_changed": true,
  "rules_changed": true,
  "config_changed": false,
  "checksum_from": "87128a79c72e7eb98a7f56c5073e7716bbbc668c5ba81bbe23c5ec201d8b86bb",
  "checksum_to": "aa9e0ce70cf56b1602d84cf66bd5f239508076d8ed3779d36931f579e770ff75",
  "author_from": "author@example.com",
  "author_to": "updater@example.com",
  "created_at_from": "2026-01-06T09:36:17.965130227+00:00",
  "created_at_to": "2026-01-06T09:36:17.965135026+00:00"
}
üìö Policy history for 'test-policy'...

Policy Version History
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚Üí Version 1.0.0
  Author: author@example.com
  Created: 2026-01-06T09:36:17.965205970+00:00
  Description: Initial policy version
  Tags: initial

Current version: 1.0.0
Total versions: 1
üìö Policy history for 'test-policy'...
{
  "policy_id": "test-policy",
  "versions": [
    {
      "version": "1.0.0",
      "content": {
        "id": "test-policy",
        "name": "Test Policy",
        "description": "Test policy description",
        "rules": {
          "test": "rule"
        },
        "config": {}
      },
      "metadata": {
        "checksum": "87128a79c72e7eb98a7f56c5073e7716bbbc668c5ba81bbe23c5ec201d8b86bb",
        "size_bytes": 117,
        "is_major": true,
        "tags": [
          "initial"
        ]
      },
      "author": "author@example.com",
      "created_at": "2026-01-06T09:36:17.965243781+00:00",
      "change_description": "Initial policy version"
    }
  ],
  "current_version": "1.0.0"
}
üìä costpilot diff


  Delta:   +$20.00/month (+20.0%)

  Severity:  üü° MEDIUM

üí° Tip
   Use 'costpilot scan --explain' to see detailed breakdown
   Use 'costpilot autofix patch' for autofix suggestions
.....üìä Policy status for 'test-policy'...
{
  "analyses": [
    {
      "slo_id": "slo-1",
      "slo_name": "Production Budget",
      "burn_rate": 142.86,
      "projected_cost": 4428.6,
      "slo_limit": 5000.0,
      "days_to_breach": 8.5,
      "risk": "high",
      "confidence": 0.95,
      "trend_slope": 142.86,
      "trend_intercept": 1000.0,
      "r_squared": 0.95,
      "analyzed_at": "2026-01-06T09:36:17.966549524+00:00"
    },
    {
      "slo_id": "slo-2",
      "slo_name": "Dev Budget",
      "burn_rate": 50.0,
      "projected_cost": 1500.0,
      "slo_limit": 2000.0,
      "days_to_breach": 25.0,
      "risk": "medium",
      "confidence": 0.82,
      "trend_slope": 50.0,
      "trend_intercept": 500.0,
      "r_squared": 0.82,
      "analyzed_at": "2026-01-06T09:36:17.966556166+00:00"
    }
  ],
  "overall_risk": "high",
  "total_slos": 2,
  "slos_at_risk": 1,
  "generated_at": "2026-01-06T09:36:17.966567267+00:00"
}

## üìä SLO Burn Rate Analysis

| SLO | Burn Rate | Projected | Days to Breach | Risk | Confidence |
|-----|-----------|-----------|----------------|------|------------|
| üî∂ Production Budget | $142.86/day | $4428.60 | 8.5 days | High | 95% |
| ‚ö†Ô∏è Dev Budget | $50.00/day | $1500.00 | 25.0 days | Medium | 82% |

### Summary

- **Total SLOs:** 2
- **At Risk:** 1
- **Overall Risk:** High

### ‚ö†Ô∏è Action Required

**Recommended Actions:**
1. Review cost drivers in critical SLOs
2. Consider scaling down or optimizing resources
3. Update SLO limits if growth is expected
4. Investigate unexpected cost increases
Policy Lifecycle Status
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Policy ID: test-policy
Status: Draft
Description: Policy is being drafted or edited

Permissions:
  Editable: ‚úÖ Yes
  Enforceable: ‚ùå No

üìä Policy status for 'test-policy'...
{
  "policy_id": "test-policy",
  "current_state": "draft",
  "state_description": "Policy is being drafted or edited",
  "is_editable": true,
  "is_enforceable": false,
  "requires_approval": false,
  "approvals_received": 0,
  "approvals_required": 1,
  "has_rejections": false,
  "is_expired": false,
  "transition_count": 0,
  "last_transition": null
}
üìä Policy status for 'test-policy'...

Policy Lifecycle Status
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Policy ID: test-policy
Status: Draft
Description: Policy is being drafted or edited

Permissions:
  Editable: ‚úÖ Yes
  Enforceable: ‚ùå No

History:
  Transitions: 0

üìä SLO Burn Rate Analysis
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üî∂ Production Budget ($5000.00/month)
  Burn Rate:      $142.86/day
  Projected Cost: $4428.60/month
  Time to Breach: 8.5 days
  Risk Level:     High
  Confidence:     95% (R¬≤ = 0.950)

‚ö†Ô∏è  Dev Budget ($2000.00/month)
  Burn Rate:      $50.00/day
  Projected Cost: $1500.00/month
  Time to Breach: 25.0 days
  Risk Level:     Medium
  Confidence:     82% (R¬≤ = 0.820)

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Summary
  Total SLOs:     2
  At Risk:        1
  Overall Risk:   High

‚ö†Ô∏è  Action Required

Recommended Actions:
  1. Review cost drivers in critical SLOs
  2. Consider scaling down or optimizing resources
.  3. Update SLO limits if growth is expected
  4. Investigate unexpected cost increases

.......‚ùå Rejecting policy 'test-policy'...

‚ùå Policy rejected

Policy ID: test-policy
Reviewer: approver@example.com
Reason: Needs more review

The policy has been sent back to draft status.
Author should address feedback and resubmit.
‚ùå Rejecting policy 'test-policy'...
{
  "approved": false,
  "approver": "approver@example.com",
  "sufficient_approvals": false,
  "remaining_approvals": 0
}
..üìù Submitting policy for approval...

‚úÖ Policy submitted for approval

Policy ID: .tmpaTRcPG
Status: Review

Approval requests sent to:
  ‚Ä¢ approver1@example.com
  ‚Ä¢ approver2@example.com

Next steps:
  1. Wait for approvers to review
  2. Check status: costpilot policy status .tmpaTRcPG
  3. Activate when approved: costpilot policy activate .tmpaTRcPG
üìù Submitting policy for approval...
{
  "approvers": [
    "approver@example.com"
  ],
  "policy_id": ".tmpaTRcPG",
  "status": "submitted"
}
.Verify error: Failed to read manifest: No such file or directory (os error 2)
..Playbook error: Failed to read manifest: No such file or directory (os error 2)
Recover error: Failed to read manifest: No such file or directory (os error 2)
.........‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           CostPilot Comprehensive Grouping Report            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

Total Resources: 0
Total Monthly Cost: $-0.00

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Module Breakdown
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê


‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Service Breakdown
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Service Cost Summary
===================

Total Monthly Cost: $-0.00

By Category:

Top Services:

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Environment Breakdown
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Environment Cost Summary
=======================

Total Monthly Cost: $-0.00

By Environment:

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Cost Attribution
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Cost Attribution Report
======================

Total Monthly Cost: $0.00
Tagging Coverage: 0.0%
Untagged Cost: $0.00

By Environment:

Top Cost Centers:

Top Owners:

Top Projects:

.Environment Grouping Report
==========================

Total Monthly Cost: $-0.00

Service Cost Summary
===================

Total Monthly Cost: $-0.00

By Category:

Top Services:

{
  "module_groups": [],
  "service_groups": [],
  "environment_groups": [],
  "attribution_report": {
    "allocations": [],
    "total_cost": 0.0,
    "cost_by_environment": {},
    "cost_by_cost_center": {},
    "cost_by_owner": {},
    "cost_by_project": {},
    "cost_by_application": {},
    "untagged_cost": 0.0
  },
  "total_resources": 0,
  "total_cost": -0.0
}
{
  "allocations": [],
  "total_cost": 0.0,
  "cost_by_environment": {},
  "cost_by_cost_center": {},
  "cost_by_owner": {},
  "cost_by_project": {},
  "cost_by_application": {},
  "untagged_cost": 0.0
}
......üöÄ Initializing CostPilot...
  ‚úì Created /tmp/.tmpWzP5SP/.costpilot
  ‚úì Created /tmp/.tmpWzP5SP/.costpilot/config.yml
  Skipping CI template generation
  ‚úì Created /tmp/.tmpWzP5SP/.costpilot/policy.yml
Module Grouping Report
=====================

Total Monthly Cost: $-0.00

  ‚úì Created /tmp/.tmpWzP5SP/.costpilot/baseline.json
  ‚úì Created /tmp/.tmpWzP5SP/.costpilot/slo.json
  ‚úì Created /tmp/.tmpWzP5SP/.gitignore

‚úÖ CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Run 'costpilot scan' manually to analyze costs
üöÄ Initializing CostPilot...
  ‚úì Created /tmp/.tmpeU86xA/.costpilot
  ‚úì Created /tmp/.tmpeU86xA/.costpilot/config.yml
  Skipping CI template generation
  ‚úì Created /tmp/.tmpeU86xA/.costpilot/policy.yml
  ‚úì Created /tmp/.tmpeU86xA/.costpilot/baseline.json
  ‚úì Created /tmp/.tmpeU86xA/.costpilot/slo.json
  ‚úì Created /tmp/.tmpeU86xA/.gitignore

‚úÖ CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Run 'costpilot scan' manually to analyze costs
üöÄ Initializing CostPilot...
  ‚Üí /tmp/.tmpeU86xA/.costpilot already exists
  ‚Üí /tmp/.tmpeU86xA/.costpilot/config.yml already exists (skipped)
  Skipping CI template generation
  ‚Üí /tmp/.tmpeU86xA/.costpilot/policy.yml already exists (skipped)
  ‚Üí /tmp/.tmpeU86xA/.costpilot/baseline.json already exists (skipped)
  ‚Üí /tmp/.tmpeU86xA/.costpilot/slo.json already exists (skipped)
  ‚Üí .gitignore already contains CostPilot entries

‚úÖ CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Run 'costpilot scan' manually to analyze costs
Cost Attribution Report
======================

Total Monthly Cost: $0.00
Tagging Coverage: 0.0%
Untagged Cost: $0.00

By Environment:

Top Cost Centers:

Top Owners:

Top Projects:

.üöÄ Initializing CostPilot...
.üìä CostPilot Dependency Mapper

  ‚úì Created /tmp/.tmp94sIOt/.costpilot
  ‚úì Created /tmp/.tmp94sIOt/.costpilot/config.yml
digraph CostPilot {
  rankdir=TB;
  node [fontname="Helvetica", fontsize=12];
  edge [fontname="Helvetica", fontsize=10];
  graph [pad="0.5", nodesep="1", ranksep="1"];

  "aws_instance_example" [label="example\naws_instance", shape=box, fillcolor="lightblue", style="filled"];
  "aws_s3_bucket_example" [label="example\naws_s3_bucket", shape=box, fillcolor="lightblue", style="filled"];
  // Edges

  // Legend
  subgraph cluster_legend {
    label="Legend";
    style=dashed;
    color=gray;

    legend_resource [label="Resource", shape=box, fillcolor="lightblue", style="filled"];
    legend_service [label="Service", shape=ellipse, fillcolor="lightgreen", style="filled"];
    legend_module [label="Module", shape=folder, fillcolor="lightyellow", style="filled"];

    legend_edge1 [label="", shape=point, width=0];
    legend_edge2 [label="", shape=point, width=0];
    legend_edge3 [label="", shape=point, width=0];
    legend_edge4 [label="", shape=point, width=0];
    legend_edge5 [label="", shape=point, width=0];

    legend_edge1 -> legend_edge2 [label="depends", style="solid"];
    legend_edge2 -> legend_edge3 [label="data", style="dashed", color="blue"];
    legend_edge3 -> legend_edge4 [label="network", style="dotted", color="green"];
    legend_edge4 -> legend_edge5 [label="cost", style="bold", color="red"];
  }

}

  ‚úì Created /tmp/.tmp94sIOt/.github/workflows
  ‚úì Created /tmp/.tmp94sIOt/.github/workflows/costpilot.yml
  ‚úì Created /tmp/.tmp94sIOt/.costpilot/policy.yml
  ‚úì Created /tmp/.tmp94sIOt/.costpilot/baseline.json
  ‚úì Created /tmp/.tmp94sIOt/.costpilot/slo.json
  ‚úì Created /tmp/.tmp94sIOt/.gitignore

‚úÖ CostPilot initialized successfully!

Next steps:
  1. Review .costpilot/config.yml
  2. Customize .costpilot/policy.yml if needed
  3. Commit the CI configuration file
  4. CostPilot will run automatically on pull requests
üìä CostPilot Dependency Mapper

üìä CostPilot Dependency Mapper

Loading Terraform plan...
   Found 2 resource changes

Building dependency graph...
   Nodes: 2
   Edges: 0

Generating Graphviz DOT...
digraph CostPilot {
  rankdir=LR;
  node [fontname="Helvetica", fontsize=12];
  edge [fontname="Helvetica", fontsize=10];
  graph [pad="0.5", nodesep="1", ranksep="1"];

  "aws_instance_example" [label="example\naws_instance", shape=box, fillcolor="lightblue", style="filled"];
  "aws_s3_bucket_example" [label="example\naws_s3_bucket", shape=box, fillcolor="lightblue", style="filled"];
  // Edges

  // Legend
  subgraph cluster_legend {
    label="Legend";
    style=dashed;
    color=gray;

    legend_resource [label="Resource", shape=box, fillcolor="lightblue", style="filled"];
    legend_service [label="Service", shape=ellipse, fillcolor="lightgreen", style="filled"];
    legend_module [label="Module", shape=folder, fillcolor="lightyellow", style="filled"];

    legend_edge1 [label="", shape=point, width=0];
    legend_edge2 [label="", shape=point, width=0];
    legend_edge3 [label="", shape=point, width=0];
    legend_edge4 [label="", shape=point, width=0];
    legend_edge5 [label="", shape=point, width=0];

    legend_edge1 -> legend_edge2 [label="depends", style="solid"];
    legend_edge2 -> legend_edge3 [label="data", style="dashed", color="blue"];
    legend_edge3 -> legend_edge4 [label="network", style="dotted", color="green"];
    legend_edge4 -> legend_edge5 [label="cost", style="bold", color="red"];
  }

}


Graphviz Tips:
  ‚Ä¢ Render as PNG: dot -Tpng input.dot -o output.png
  ‚Ä¢ Render as SVG: dot -Tsvg input.dot -o output.svg
  ‚Ä¢ Render as PDF: dot -Tpdf input.dot -o output.pdf

Graph Statistics:
  Total nodes: 2
  Total edges: 0
  Max depth: 0

  By type:
    Resources: 2
    Services: 0
    Modules: 0
...üìä CostPilot Dependency Mapper

{
  "elements": [
    {
      "classes": "resource",
      "data": {
        "id": "aws_instance_example",
        "label": "example",
        "module": null,
        "monthly_cost": null,
        "resource_type": "aws_instance",
        "type": "resource"
      }
    },
    {
      "classes": "resource",
      "data": {
        "id": "aws_s3_bucket_example",
        "label": "example",
        "module": null,
        "monthly_cost": null,
        "resource_type": "aws_s3_bucket",
        "type": "resource"
      }
    }
  ],
  "style": [
    {
      "selector": "node",
      "style": {
        "background-color": "#3498db",
        "color": "#fff",
        "label": "data(label)",
        "text-halign": "center",
        "text-valign": "center"
      }
    },
    {
      "selector": "node.resource",
      "style": {
        "background-color": "#3498db",
        "shape": "rectangle"
      }
    },
    {
      "selector": "node.service",
      "style": {
        "background-color": "#2ecc71",
        "shape": "ellipse"
      }
    },
    {
      "selector": "node.module",
      "style": {
        "background-color": "#f39c12",
        "shape": "roundrectangle"
      }
    },
    {
      "selector": "edge",
      "style": {
        "curve-style": "bezier",
        "line-color": "#95a5a6",
        "target-arrow-color": "#95a5a6",
        "target-arrow-shape": "triangle",
        "width": 2
      }
    },
    {
      "selector": "edge.dependson",
      "style": {
        "line-color": "#34495e"
      }
    },
    {
      "selector": "edge.dataflow",
      "style": {
        "line-color": "#3498db",
        "line-style": "dashed"
      }
    },
    {
      "selector": "edge.networkconnection",
      "style": {
        "line-color": "#2ecc71",
        "line-style": "dotted"
      }
    },
    {
      "selector": "edge.costattribution",
      "style": {
        "line-color": "#e74c3c",
        "width": 3
      }
    }
  ]
}
üìä CostPilot Dependency Mapper

Loading Terraform plan...
   Found 2 resource changes

Building dependency graph...
   Nodes: 2
   Edges: 0

Exporting to JSON...
{
  "links": [],
  "nodes": [
    {
      "group": 1,
      "id": "aws_instance_example",
      "label": "example",
      "module": null,
      "monthly_cost": null,
      "resource_type": "aws_instance",
      "type": "resource"
    },
    {
      "group": 1,
      "id": "aws_s3_bucket_example",
      "label": "example",
      "module": null,
      "monthly_cost": null,
      "resource_type": "aws_s3_bucket",
      "type": "resource"
    }
  ]
}

JSON Format:
  Format variant: d3
  Use with D3.js force-directed graph layout

Graph Statistics:
  Total nodes: 2
  Total edges: 0
  Max depth: 0

  By type:
    Resources: 2
    Services: 0
    Modules: 0
....üìä CostPilot Dependency Mapper

flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404

.üìä CostPilot Dependency Mapper

‚úì Output written to /tmp/.tmpQAMAOe/output.mmd
...üìä CostPilot Dependency Mapper

Loading Terraform plan...
   Found 2 resource changes

Building dependency graph...
   Nodes: 2
   Edges: 0

Generating Mermaid diagram...
flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404


Graph Statistics:
  Total nodes: 2
  Total edges: 0
  Max depth: 0

  By type:
    Resources: 2
    Services: 0
    Modules: 0
[
  {
    "action": {
      "message": "EC2 instance exceeds monthly budget of $1000",
      "type": "block"
    },
    "conditions": [
      {
        "condition_type": {
          "type": "resource_type"
        },
        "operator": "equals",
        "value": "aws_instance"
      },
      {
        "condition_type": {
          "type": "monthly_cost"
        },
        "operator": "greater_than",
        "value": 1000.0
      }
    ],
    "description": "Prevent creation of EC2 instances that cost more than $1000/month",
    "enabled": true,
    "name": "Block Expensive EC2 Instances",
    "severity": "High"
  }
]
..üìä CostPilot Dependency Mapper

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infrastructure Dependencies</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        h1 {
            color: #333;
            margin-top: 0;
            font-size: 28px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .metadata {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 14px;
        }
        .metadata strong {
            color: #495057;
        }
        .mermaid {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .legend {
            margin-top: 30px;
            padding: 15px;
            background: #e7f3ff;
            border-radius: 8px;
            font-size: 13px;
        }
        .legend h3 {
            margin-top: 0;
            color: #0056b3;
        }
        .legend ul {
            list-style: none;
            padding: 0;
        }
        .legend li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
        }
        .legend li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Infrastructure Dependencies</h1>

        <div class="metadata">
            <strong>Nodes:</strong> 2 |
            <strong>Edges:</strong> 0 |
            <strong>Max Depth:</strong> 0 |
            <strong>Cycles:</strong> 0 |
            <strong>Total Cost:</strong> $N/A
        </div>

        <div class="mermaid">
flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404

        </div>

        <div class="legend">
            <h3>Legend</h3>
            <ul>
                <li><strong>Solid arrows (‚Üí)</strong>: Direct dependencies</li>
                <li><strong>Dashed arrows (‚á¢)</strong>: Data flow</li>
                <li><strong>Double arrows (‚áí)</strong>: Network connections</li>
                <li><strong>Dotted arrows (‚ãØ)</strong>: Cost attribution</li>
                <li><strong>Red border</strong>: Part of a dependency cycle</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                curve: 'basis',
                padding: 20
            }
        });
    </script>
</body>
</html>

# CostPilot Policy Rules Example

- name: "Block Expensive EC2 Instances"
  description: "Prevent creation of EC2 instances that cost more than $1000/month"
  enabled: true
  severity: High
  conditions:
    - condition_type:
        type: resource_type
      operator: equals
      value: "aws_instance"
    - condition_type:
        type: monthly_cost
      operator: greater_than
      value: 1000.0
  action:
    type: block
    message: "EC2 instance exceeds monthly budget of $1000"

- name: "Require Approval for NAT Gateways"
  description: "NAT Gateways require approval from network team"
  enabled: true
  severity: Medium
  conditions:
    - condition_type:
        type: resource_type
      operator: equals
      value: "aws_nat_gateway"
  action:
    type: require_approval
    approvers:
      - "network-team@example.com"
    message: "NAT Gateway creation requires network team approval"

- name: "Warn on High Cost Increase"
  description: "Warn when cost increases by more than 50%"
  enabled: true
  severity: Medium
  conditions:
    - condition_type:
        type: cost_increase
      operator: greater_than
      value: 50.0
  action:
    type: warn
    message: "Cost increase exceeds 50% threshold"

- name: "Restrict Instance Types"
  description: "Only allow t3, t4g, or m6i instance families"
  enabled: true
  severity: High
  conditions:
    - condition_type:
        type: resource_type
      operator: equals
      value: "aws_instance"
    - condition_type:
        type: resource_attribute
        attribute: "instance_type"
      operator: not_in
      value:
        - "t3"
        - "t4g"
        - "m6i"
  action:
    type: block
    message: "Only t3, t4g, or m6i instance families are allowed"

üìä CostPilot Dependency Mapper

flowchart TB
        aws_instance_example["example"]
        aws_s3_bucket_example["example"]


    classDef resource fill:#d1ecf1,stroke:#0c5460
    classDef service fill:#d4edda,stroke:#155724
    classDef module fill:#fff3cd,stroke:#856404

üìä CostPilot Dependency Mapper

.....‚úì Example written to /tmp/.tmpMOnrjh/example.yml
Policy Rule Statistics

Searching default paths...

Total Rules: 0
Enabled: 0
Disabled: 0

By Severity:

..Policy Rule Statistics

Loading from: /tmp/.tmpVJiytj/policy.yml
Policy Rules

No policy rules found
Search paths:
  ‚Ä¢ .costpilot/policies
  ‚Ä¢ .costpilot/rules
  ‚Ä¢ /home/dee/.costpilot/policies
  ‚Ä¢ /etc/costpilot/policies
.Policy Rules

No policy rules found
Search paths:

Total Rules: 1
Enabled: 1
Disabled: 0

By Severity:
  Medium: 1

  ‚Ä¢ .costpilot/policies
  ‚Ä¢ .costpilot/rules
  ‚Ä¢ /home/dee/.costpilot/policies
  ‚Ä¢ /etc/costpilot/policies
.....Testing Policy Rules

Loaded 1 rules

Found 1 matching rules:

‚Ä¢ Test Rule [LOW]
  Test warning
  Action: Warn { message: "Test warning" }

.Validating Policy Rules
Path: /tmp/.tmp45o3QF/nonexistent.yml

......Testing Policy Rules

Validating Policy Rules
Path: /tmp/.tmpsVkMMf/policy.yml

Loaded 1 rules

Found 1 matching rules:

‚Ä¢ Test EC2 Rule [HIGH]
‚úì All rules valid

Total Rules: 1
Enabled: 1
Disabled: 0

By Severity:
  Medium: 1

  EC2 instance too expensive

‚ö†Ô∏è  Some rules would BLOCK this resource
.. 115/578
....Actual error: Package verification failed: ["Not all required files are present"]
................................................................................... 202/578
....................................................................................... 289/578
...................................................................‚ö†Ô∏è  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
‚ö†Ô∏è  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
..‚ö†Ô∏è  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
.‚ö†Ô∏è  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
‚ö†Ô∏è  Free edition: Policy enforcement disabled (lint-only mode)
   Upgrade to Premium to block deployments on policy violations
................. 376/578
.............................................................................‚ö†Ô∏è  Free edition: SLO 'monthly_budget' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
‚ö†Ô∏è  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
‚ö†Ô∏è  Free edition: SLO 'monthly_budget' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
......‚ö†Ô∏è  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
.   Upgrade to Premium to enforce SLO blocking
‚ö†Ô∏è  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
... 463/578
..‚ö†Ô∏è  Free edition: SLO 'slo-1' downgraded from Block to Warn (validate-only)
   Upgrade to Premium to enforce SLO blocking
................................................................................Report errors: [ValidationError { message: "Negative monthly cost: -100", field: Some("modules.root.test.expected_monthly_cost"), line: None, column: None, hint: Some("Cost must be non-negative"), error_code: Some("E301") }]
Report is_valid: false
..... 550/578
............................
failures:

failures:
    cli::commands::audit::tests::test_cmd_audit_compliance

test result: FAILED. 577 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.11s

error: test failed, to rerun pass `--lib`
None, column: None, hint: Some.("Cost must be non-negative"), error_code: Some("E301") }].
Report is_valid: false
............................
test result: ok. 578 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.07s

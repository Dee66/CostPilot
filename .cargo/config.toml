# Cross-compilation configuration for CostPilot
# Fixes vendored OpenSSL compilation on non-native targets

[target.aarch64-unknown-linux-gnu]
linker = "aarch64-linux-gnu-gcc"

[target.aarch64-apple-darwin]
linker = "aarch64-apple-darwin-ld"

# Environment variables for cross-compilation
# Required when using vendored OpenSSL feature
[env]
CC_aarch64_unknown_linux_gnu = "aarch64-linux-gnu-gcc"
AR_aarch64_unknown_linux_gnu = "aarch64-linux-gnu-ar"
CARGO_TARGET_AARCH64_UNKNOWN_LINUX_GNU_LINKER = "aarch64-linux-gnu-gcc"

# macOS ARM64 cross-compilation (when cross-compiling from x86_64)
CC_aarch64_apple_darwin = "clang"
AR_aarch64_apple_darwin = "ar"

# Build optimization
[build]
jobs = 4

[profile.release]
strip = true
lto = true
codegen-units = 1

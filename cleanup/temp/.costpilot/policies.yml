# CostPilot Policy Configuration
# Version: 1.0.0
# Schema: https://github.com/Dee66/CostPilot/schemas/policy.schema.json

version: "1.0.0"
metadata:
  owner: "team@example.com"
  created_at: "2025-12-07"
  description: "Default cost governance policies for CostPilot"

policies:
  - id: "monthly-budget-limit"
    name: "Monthly Budget Limit"
    description: "Enforce monthly cost budget threshold"
    enforcement_mode: "warn"  # warn | block
    rules:
      - type: "cost_threshold"
        threshold: 1000.0
        currency: "USD"
        period: "monthly"
    severity: "high"
    
  - id: "nat-gateway-required-justification"
    name: "NAT Gateway Justification Required"
    description: "NAT gateways are expensive and require justification"
    enforcement_mode: "warn"
    rules:
      - type: "resource_pattern"
        pattern: "aws_nat_gateway.*"
        requires_tag: "justification"
    severity: "medium"
    
  - id: "no-untagged-resources"
    name: "All Resources Must Be Tagged"
    description: "Enforce tagging for cost attribution"
    enforcement_mode: "warn"
    rules:
      - type: "required_tags"
        tags:
          - "Environment"
          - "Owner"
          - "CostCenter"
    severity: "low"
